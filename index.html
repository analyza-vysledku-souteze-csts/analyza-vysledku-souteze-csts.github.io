<!doctype html><html lang=cs><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content="2026-01-01; version:0.30.0" name=description><link href=data:imagebmp;base64,Qk02AwAAAAAAADYAAAAoAAAAEAAAABAAAAABABgAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAkO6QkO6QkO6QkO6QkO6QkO6QkO6QkO6QRacoRacoRacoRacoRacoRacoRacoRacokO6QkO6QkO6QkO6QkO6QkO6QkO6QkO6QRacoRacoRacoRacoRacoRacoRacoRacokO6QkO6QkO6QkO6QkO6QkO6QkO6QkO6QRacoRacoRacoRacoRacoRacoRacoRacokO6QkO6QkO6QkO6QkO6QkO6QkO6QkO6QRacoRacoRacoRacoRacoRacoRacoRacokO6QkO6QkO6QkO6QkO6QkO6QkO6QkO6QRacoRacoRacoRacoRacoRacoRacoRacokO6QkO6QkO6QkO6QkO6QkO6QkO6QkO6QRacoRacoRacoRacoRacoRacoRacoRacokO6QkO6QkO6QkO6QkO6QkO6QkO6QkO6QRacoRacoRacoRacoRacoRacoRacoRacokO6QkO6QkO6QkO6QkO6QkO6QkO6QkO6QRacoRacoRacoRacoRacoRacoRacoRacoRacoRacoRacoRacoRacoRacoRacoRacoANf/ANf/ANf/ANf/ANf/ANf/ANf/ANf/RacoRacoRacoRacoRacoRacoRacoRacoANf/ANf/ANf/ANf/ANf/ANf/ANf/ANf/RacoRacoRacoRacoRacoRacoRacoRacoANf/ANf/ANf/ANf/ANf/ANf/ANf/ANf/RacoRacoRacoRacoRacoRacoRacoRacoANf/ANf/ANf/ANf/ANf/ANf/ANf/ANf/RacoRacoRacoRacoRacoRacoRacoRacoANf/ANf/ANf/ANf/ANf/ANf/ANf/ANf/RacoRacoRacoRacoRacoRacoRacoRacoANf/ANf/ANf/ANf/ANf/ANf/ANf/ANf/RacoRacoRacoRacoRacoRacoRacoRacoANf/ANf/ANf/ANf/ANf/ANf/ANf/ANf/RacoRacoRacoRacoRacoRacoRacoRacoANf/ANf/ANf/ANf/ANf/ANf/ANf/ANf/ rel=icon><title>Vizualizace výsledků soutěže ČSTS</title><script async src=https://scripts.simpleanalyticscdn.com/latest.js></script><style>*{box-sizing:border-box;margin:0;padding:0}body{background-color:#f5f5f5;flex-direction:column;min-height:100vh;font-family:Arial,sans-serif;display:flex}@media (width<=768px){.small{display:block!important}span.small{display:inline!important}th.small,td.small{display:table-cell!important}.desktop{display:none!important}body{padding:20px 0}.container{margin:0 auto;padding:20px 5px}.filter-row select{width:200px;font-size:12px}.single-section h3{margin-bottom:10px;font-size:14px}.single-section h3 .caption{padding:5px}.judges-line{padding-bottom:5px;font-size:12px}.analysis-table th{padding:4px 1px;font-size:10px}.analysis-table td{padding:1px;font-size:11px}.analysis-table .ch-final-order{width:30px;max-width:30px}.analysis-table .ch-round-result,.analysis-table .ch-final-points{width:40px;max-width:40px}.analysis-table .cd-info{padding-left:5px;font-size:12px}.analysis-table .ch-info{text-align:left;padding-left:5px}.c-info{vertical-align:top;min-height:30px}.c-info.c-info-dance{vertical-align:center;align-items:center;display:flex}.analysis-table .club-name{font-size:10px}}@media (width>=769px){.small{display:none!important}.desktop{display:block!important}span.desktop{display:inline!important}th.desktop,td.desktop{display:table-cell!important}body{padding:20px}.container{margin:0 auto;padding:20px}.filter-row select{width:200px;font-size:14px}.single-section h3{margin-bottom:15px;font-size:16px}.single-section h3 .caption{padding:10px}.go-to-top{width:clamp(50px,50cqi - 200px,500px)!important}.judges-line{padding-bottom:10px;font-size:14px}.analysis-table th{height:44px;padding:8px;font-size:12px}.analysis-table td{padding:8px;font-size:13px}.analysis-table .ch-final-order,.analysis-table .ch-round-result,.analysis-table .ch-final-points{width:65px;max-width:65px}.analysis-table .cd-info{padding-left:10px;font-size:14px}.analysis-table .ch-info{text-align:left;padding-left:10px}.analysis-table .club-name{font-size:12px}}.container{background-color:#fff;border-radius:8px;flex:1;width:100%;max-width:none;box-shadow:0 2px 4px #0000001a}h1{margin-bottom:10px;font-size:24px}.input-section{background-color:#f9f9f9;border-radius:4px;align-items:center;gap:10px;margin:10px 0;padding:10px;display:flex}.input-section label,.input-section span{white-space:nowrap;font-weight:700}.input-section input{border:1px solid #ddd;border-radius:4px;flex:1;min-width:20px;padding:10px;font-size:14px}.input-section button{color:#fff;cursor:pointer;white-space:nowrap;background-color:#007bff;border:none;border-radius:4px;padding:10px 20px;font-size:14px}.input-section button:hover{background-color:#0056b3}.loading{text-align:left;color:#666;padding:20px;font-size:14px}.error{color:#721c24;background-color:#f8d7da;border-radius:4px;margin-bottom:20px;padding:15px}.event-name,.competition-name{color:#333}.loaded-events{cursor:pointer;font-size:16px;font-weight:400}.event-name{font-family:Tahoma,sans-serif;font-size:22px;font-weight:400}.competition-name{font-size:20px;font-weight:700}.tabs{border-bottom:2px solid #ddd;flex-wrap:wrap;display:flex}.tab-header{cursor:pointer;background-color:#f5f5f5;border:1px solid #ddd;border-bottom:none;border-radius:4px 4px 0 0;margin-right:4px;padding:12px 24px;transition:background-color .3s}.tab-header:hover{background-color:#e9ecef}.tab-header.active{background-color:#fff;border-bottom:2px solid #fff;margin-bottom:-2px;font-weight:700}.filter-section{background-color:#f8f9fa;border-radius:4px;flex-wrap:wrap;align-items:center;gap:20px;margin-bottom:20px;padding:15px 20px;display:flex}.filter-row{align-items:center;gap:8px;display:flex}.filter-row label{white-space:nowrap;font-weight:700}.filter-row select{border:1px solid #ddd;border-radius:4px;padding:8px}.filter-buttons{gap:10px;margin-left:auto;display:flex}.filter-buttons button{cursor:pointer;color:#fff;background-color:#dc3545;border:none;border-radius:4px;padding:8px 16px;font-size:14px}.filter-buttons button:hover{background-color:#c82333}.legend{background-color:#f8f9fa;border-radius:4px;margin-top:20px;padding:15px}.legend-items{flex-wrap:wrap;align-items:center;gap:15px;display:flex}.legend-label{margin-right:10px;font-weight:700}.legend-item{align-items:center;gap:8px;font-size:12px;display:flex}.legend-color{border:1px solid #ddd;border-radius:2px;width:30px;height:20px}.legend-color.diff-0{background-color:#28a745}.legend-color.diff-1{background-color:#90ee90}.legend-color.diff-2{background-color:#ff9}.legend-color.diff-3{background-color:gold}.legend-color.diff-4{background-color:orange}.legend-color.diff-5{background-color:#ff8c00}.legend-color.diff-6{background-color:tomato}.single-section{padding:20px 0}.single-section h3{color:#333;background-color:#f8f9fa;border-left:4px solid #007bff;display:flex;container:Section/inline-size}.single-section h3 .go-to-top{cursor:pointer;background-image:url("data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 30 30\" fill=\"%23007bff\"%3E%3Cpath d=\"M15 8 L22 15 L20 17 L15 12 L10 17 L8 15 Z\"/%3E%3Cpath d=\"M15 14 L22 21 L20 23 L15 18 L10 23 L8 21 Z\"/%3E%3C/svg%3E");background-position:100%;background-repeat:no-repeat;background-size:contain;margin-left:auto;display:inline-block}.go-to-top:hover{background-color:#e8e9ea}.go-to-top{width:30px}.analysis-table{table-layout:fixed;border-collapse:collapse;width:100%}.analysis-table th,.analysis-table td{text-align:center;border:1px solid #ddd}.analysis-table th{color:#fff;background-color:#6c757d;font-weight:700}.analysis-table .ch-info{width:40%}.analysis-table .cd-info{text-align:left}.analysis-table .club-name{color:#525b66;font-style:italic}.club-highlight{background-color:#fff3cd;padding:2px 4px}h3 .diff-0{padding:1px 5px;color:#fff!important;background-color:#28a745!important}.analysis-table .cd-final-order,.analysis-table .cd-round-result{background-color:#e9ecef;font-weight:700}.analysis-table .cd-round-result.different-final-place{background-color:#c9cccf}.analysis-table .cd-final-points{white-space:pre;background-color:#fff;font-weight:700}.analysis-table .x-mark,.analysis-table .diff-0{color:#fff;background-color:#28a745;font-weight:700}.analysis-table .diff-1{background-color:#90ee90}.analysis-table .diff-2{background-color:#ff9}.analysis-table .diff-3{background-color:gold}.analysis-table .diff-4{background-color:orange}.analysis-table .diff-5{background-color:#ff8c00}.analysis-table .diff-6{color:#fff;background-color:tomato}.qualified-row td.cd-info,.qualified-row td.dance-column:not(.x-mark):not([class*=diff-]){background-color:#e7f3ff!important}.competition-link{box-sizing:border-box;width:100%;overflow:hidden}.competition-link a{overflow-wrap:break-word;word-break:break-all;white-space:normal;max-width:100%;text-overflow:initial;display:inline-block}#competitionLink a[target=_blank]:after{content:"";vertical-align:text-bottom;background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ij48cGF0aCBkPSJNOSAyTDkgMyAxMi4zIDMgNiA5LjMgNi43IDEwIDEzIDMuNyAxMyA3IDE0IDcgMTQgMlpNNCA0QzIuOSA0IDIgNC45IDIgNkwyIDEyQzIgMTMuMSAyLjkgMTQgNCAxNEwxMCAxNEMxMS4xIDE0IDEyIDEzLjEgMTIgMTJMMTIgNyAxMSA4IDExIDEyQzExIDEyLjYgMTAuNiAxMyAxMCAxM0w0IDEzQzMuNCAxMyAzIDEyLjYgMyAxMkwzIDZDMyA1LjQgMy40IDUgNCA1TDggNSA5IDRaIi8+PC9zdmc+) 0 0/contain no-repeat;width:1em;height:1em;margin:0 .05em 0 .1em;display:inline-block}.cnt-items-judge{min-width:0;container:thJudge/inline-size}.cnt-items-judge p{padding-top:1px}.hide-if-narrow{white-space:nowrap;text-overflow:ellipsis;width:100%;display:block;overflow:hidden}@container thJudge (width<=5em){.hide-if-narrow{display:none!important}}.aux-round-result{color:gray}ul.event-list{font-size:18px}ul.cmpt-list{font-size:16px}ul.event-list,ul.cmpt-list{padding-left:10px;list-style:none}.event-list li{margin-top:12px;margin-bottom:12px}.cmpt-list li{align-items:center;margin-bottom:8px;display:flex}.cmpt-list li:before{margin-right:10px;font-size:1.2em;line-height:1}.cmpt-list li.not-loaded:before{content:"○";color:#bdc3c7}.cmpt-list li.loaded:before{content:"●";color:#27ae60}</style><body><div class=container><h1>Analýza výsledků soutěže</h1><h1 class=event-name id=eventName style=display:none></h1><h1 class=competition-name id=competitionName style=display:none></h1><div class=competition-link id=competitionLink style=display:none><a id=competitionLinkAnchor rel=noopener target=_blank></a></div><div class=input-section><span class=loaded-events id=loadedEvents onclick=le() style=display:none>≡ <span style=text-decoration:underline>Načtené soutěže</span></span><span style="background-color:#ccc;width:1px;height:2em;margin:0 3px;display:none" id=loadedEventsSplitter></span><button onclick=plc()>Vložit</button><span class=small>URL soutěže</span><label class=desktop for=urlInput>URL soutěže:</label><input class=desktop id=urlInput placeholder=https://www.csts.cz/dancesport/vysledky_soutezi/event/XXX/competition/YYYYY><button class=desktop onclick=lc()>Načíst</button></div><div class=loading id=loading style=display:none><span class=loading-status id=loadingStatus></span></div><div class=error id=error style=display:none></div><div id=eventsContainer style=display:none></div><div id=tabsContainer style=display:none><div class=filter-section><div class=filter-row><label for=viewMode>Zobrazení</label><select id=viewMode onchange=rct()><option selected value=per-judge-for-cmprs>Podle rozhodčích<option value=per-competitor-for-judges>Podle účastníků<option value=per-dance-for-cmprs>Podle tanců<option value=per-competitor-for-dances>Výsledků účastníků</select></div><div class="filter-row desktop"><label for=goTo>Přejít na</label><select id=goTo onchange=gt()><option value>- vyberte -</select></div><div class="filter-row small"><label for=goTo-small>Přejít na</label><select id=goTo-small onchange=gts()><option value>- vyberte -</select></div></div><div class=tabs id=tabsHeader></div><div class=legend id=finaleLegend style=display:none><div class=legend-items><span class=legend-label>Rozdíl:</span><div class=legend-item><div class="legend-color diff-0"></div><span>Shodné umístění</span></div><div class=legend-item><div class="legend-color diff-1"></div><span>1 místo</span></div><div class=legend-item><div class="legend-color diff-2"></div><span>2 místa</span></div><div class=legend-item><div class="legend-color diff-3"></div><span>3 místa</span></div><div class=legend-item><div class="legend-color diff-4"></div><span>4 místa</span></div><div class=legend-item><div class="legend-color diff-5"></div><span>5 míst</span></div><div class=legend-item><div class="legend-color diff-6"></div><span>6+ míst</span></div></div></div><div class=tab-content id=tab-content></div></div></div><div id=dedication style=color:#789;text-align:center;margin-top:auto;padding-top:10px;font-size:11px>Tato stránka je inspirována stránkou "Analýza hodnocení ČSTS soutěží" od "Tanečních novin" (https://tanecninoviny.cz/analysis/), která navazuje na dřívější iniciativu "Finální Analýza" od "Majklova světa" (http://www.majkluvsvet.cz/analyza-finale.php).</div><div style=color:#789;text-align:center;margin-top:auto;padding-top:10px;font-size:11px>Vice <a href=http://github.com/analyza-vysledku-souteze-csts/analyza-vysledku-souteze-csts.github.io#readme target=_blank>ZDE</a>.</div><script>let r={},t={eventId:123,dateFrom:`2025-01-01`,dateTo:`2025-01-01`,eventTitle:`Mistrovství České republiky`,location:`Ostrava`,promoter:``,officials:[],competitions:[{competitionId:1234,name:`Junioři-2 C LAT`,date:`2025-01-01`,competitors:`Couple`,class:`Open`,discipline:`Standard`,age:`Juvenile II`,grade:`Championship`,series:`DanceSport`,chairPersonId:12345678,dances:[`Waltz`,`Tango`,`Viennese Waltz`,`Quickstep`],danceDisciplines:[`Standard`,`Standard`,`Standard`,`Standard`],registered:12,excused:2,completedAt:`2025-01-01T14:00:00+01:00`}],registrationState:`Closed`,resultsCanBeSentBefore:`2025-01-01T14:00:00+01:00`},i={},d={"":``,Waltz:`W`,Tango:`T`,"Viennese Waltz":`V`,Slowfox:`Sf`,Quickstep:`Q`,Samba:`Sa`,Chachacha:`C`,ChaChaCha:`C`,Rumba:`R`,"Paso Doble":`Pd`,Jive:`J`,Polka:`Po`,Bachata:`Ba`,Merengue:`Me`,Salsa:`Ss`},E=`Couple`,L={"":``,Couple:`Pár`,SoloDancer:`Sólo`,Duo:`Duo`,Group:`Skup.`,ProAm:`ProAm`,Team:`Druž.`,Formation:`Form.`,SmallTeam:`MT`,BigTeam:`VT`},F=`DanceSport`,A={"":``,DanceForAll:`TPV`,Professional:`Profi`,DanceSport:`VS`,Caribbean:`KRB`},U=`Ranking`,z={"":``,Ranking:`Post.`,Cup:`Cup`,GCup:`G-Cup`,League:`TL`,SuperLeague:`STL`,TopLevel:`VS`,Championship:`MČR`},l={"":``,E:`E`,D:`D`,C:`C`,B:`B`,A:`A`,M:`M`,Open:`O`,Novice:`N`,Bronze:`B`,Silver:`S`,Gold:`G`},B={"":``,"Under 8":`Do-8-let`,Juvenile:`Děti`,"Juvenile I":`Děti-1`,"Juvenile II":`Děti-2`,Junior:`Junioři`,"Junior I":`Junioři-1`,"Junior II":`Junioři-2`,Youth:`Mládež`,"Under 21":`Do-21-let`,Adult:`Dospělí`,Senior:`Senioři`,"Senior I":`Senioři-1`,"Senior II":`Senioři-2`,"Senior III":`Senioři-3`,"Senior IV":`Senioři-4`,"Senior V":`Senioři-5`},Q={"":``,Standard:`STT`,Latin:`LAT`,"Standard+Latin":`S+L`,SingleDance:`1T`,TenDances:`10T`,Other:`Ostatní`,ShowdanceStandard:`ShowSTT`,ShowdanceLatin:`ShowLAT`,Bachata:`Ba`,Merengue:`Me`,Salsa:`Ss`,ShowdanceBachata:`ShowBa`,ShowdanceMerengue:`ShowMe`,ShowdanceSalsa:`ShowSs`,Caribbean:`KRB`},a=null;function V(e){return e?e.toLowerCase().replace(/\s+/g,``):``}function W(e,n){return e=V(e),n=V(n),!!e&&!!n&&(e===n||e.startsWith(n)||n.startsWith(e))}function X(e){return e=e.trim().match(/https:\/\/www\.csts\.cz\/dancesport\/vysledky_soutezi\/event\/(\d+)\/competition\/(\d+)/),e?{eventId:e[1],competitionId:e[2]}:null}function o(e){return`https://www.csts.cz/dancesport/vysledky_soutezi/event/${e.eventId}/competition/`+e.competitionId}function s(e,n){return e=new Date(e.completedAt).toLocaleDateString(`cs-CZ`),n?n.eventTitle+` • ${n.location} • `+e:e}function q(e){var n,t,a,o,r,s,i,c;return e?(n=m(![`Ranking`,`Cup`].includes(e.grade),z[u(e.grade)]),t=m([`Cup`].includes(e.grade),z[u(e.grade)]),a=m(![`DanceSport`].includes(e.series),A[u(e.series)]),o=B[u(e.age)],r=e.toClass&&e.class!==e.toClass?u(l[u(e.class)]):u(e.class),s=m(e.class!==e.toClass,u(l[u(e.toClass)])),i=m(![`Couple`].includes(e.competitorsType),L[u(e.competitorsType)]),c=m([`SingleDance`].includes(e.discipline),d[e.dances[0]]),(n+` ${a} ${o} ${r}${s} ${i} ${m(![`SingleDance`].includes(e.discipline),Q[u(e.discipline)])}${c} `+t).replace(/\s{2,}/g,` `).trim()):``}function G(e,n){return n?q(n.competitionsDesc[e.competitionId]):``}function u(e){return e??``}function K(e){return e??`&nbsp;`}function m(e,n){return e?n:``}function c(e,n){return e===n?e:e+`-`+n}function p(e,n){return(u(e)+` `+u(n)).trim()}function f(e,n){return((e?e[0]+`.`:``)+u(n)).trim()}function H(e,n){return(u(n)+` `+(e?e[0]+`.`:``)).trim()}function h(e,n){return e.trim().length===0?n.trim():n.trim().length===0?e.trim():e+`&nbsp;& `+n}function g(e,n,t){return e+`. ${n} (${t})`}function Y(e){return JSON.parse(JSON.stringify(e))}let v=e=>[...new Set(e.filter(e=>e&&e.trim()!==``))],_=e=>[...new Set(e.filter(e=>typeof e==`number`&&!isNaN(e)))];function Z(e){Object.values(e.roundsMap).forEach(e=>{e.roundJudgesClubsNames=v(Object.values(e.roundJudgesIds).flatMap(e=>i[e]))})}let b={};function ee(e){var n=e.eventId;b[n]||((b[n]=e).competitionsMap={})}function ne(e,n){var t;e&&b[e]&&n&&(t=n.competitionId,b[e].competitionsMap[t]||(n.constructedEventName=b[e].constructedName,n.constructedName=b[e].competitionsDesc[t].constructedName,n.constructedUrl=b[e].competitionsDesc[t].constructedUrl,b[e].competitionsMap[t]=n,b[e].competitionsDesc[t].loaded=!0))}function te(e){let t={};return t.eventId=e.eventId,t.dateFrom=e.dateFrom,t.dateTo=e.dateTo,t.eventTitle=e.eventTitle,t.location=e.location,t.promoter=e.promoter,t.constructedName=s({completedAt:t.dateFrom},t),t.competitionsDesc=Object.fromEntries(e.competitions.map(e=>{var n={};return n.competitionId=e.competitionId,n.date=e.date,n.competitorsType=e.competitors,n.class=e.class,n.toClass=e.toClass,n.grade=e.grade,n.series=e.series,n.age=e.age,n.discipline=e.discipline,n.dances=e.dances,n.constructedName=q(n),n.loaded=!1,n.constructedUrl=o({eventId:t.eventId,competitionId:n.competitionId}),[n.competitionId,n]})),t}function ae(e){let r={},n=(r.competitionId=e.competitionId,r.completedAt=e.completedAt,e.officials.filter(e=>e.type===`Adj`).map(({id:e,name:n,surname:t,country:a,index:o,label:r})=>({id:e,name:n,surname:t,country:a,index:o,label:r})).sort((e,n)=>e.index-n.index)),t=e.competitors.map(({competitorId:e,club:n,country:t,startNumber:a,ranking:o,rankingTo:r,final:s,points:i,rounds:c,competitor:d})=>({competitorId:e,club:n,country:t,startNumber:a,ranking:o,rankingTo:r,final:s,points:i,name1:d.name1,surname1:d.surname1,name2:d.name2,surname2:d.surname2,roundNames:c.map(e=>e.round),rounds:c.map(({round:e,marks:n,ranking:t,rankingTo:a,sum:o,danceResults:r})=>({roundName:e,marks:n,ranking:t,rankingTo:a,sum:o,danceResults:r}))})).sort((e,n)=>e.ranking-n.ranking);return r.competitorsClubs=v(t.map(e=>e.club)),r.competitorsMap=Object.fromEntries(t.map(e=>[e.competitorId,e])),r.roundNames=e.rounds.map(e=>e.round).reverse(),r.roundsMap=Object.fromEntries(e.rounds.map(({round:a,dances:o,judges:e})=>[a,{roundName:a,dances:o,roundJudges:e?e.map(({id:e,name:n,surname:t,country:a,index:o,label:r})=>({id:e,name:n,surname:t,country:a,index:o,label:r})).sort((e,n)=>e.index-n.index):n,roundCompetitorsClubs:v(t.filter(e=>e.roundNames.includes(a)).map(e=>e.club)),roundCompetitors:t.filter(e=>e.roundNames.includes(a)).map(e=>{var n=e.rounds.find(e=>e.roundName===a),t=r.roundNames.indexOf(a)-1;return{competitorId:e.competitorId,startNumber:e.startNumber,name1:e.name1,surname1:e.surname1,name2:e.name2,surname2:e.surname2,club:e.club,country:e.country,overallRanking:e.ranking,overallRankingTo:e.rankingTo,points:e.points,final:e.final,wasRoundPassed:!(t<0)&&e.roundNames.includes(r.roundNames[t]),roundName:n.roundName,splitMarks:n.marks.split(`|`),marks:n.marks,ranking:n.ranking,rankingTo:n.rankingTo,sum:n.sum,danceResults:n.danceResults,dancesResultsMap:Object.fromEntries(n.danceResults.map((e,n)=>[o[n],e]))}})}])),r.allAdjudicatorsIds=_(Object.values(r.roundsMap).flatMap(e=>e.roundJudges.map(e=>e.id))),Object.values(r.roundsMap).forEach(e=>{e.roundJudgesIds=e.roundJudges.map(e=>e.id)}),r.competitorsHavePoints=t.find(e=>e.hasOwnProperty(`points`))&&0<t.filter(e=>typeof e.points==`number`).reduce((e,n)=>e+n.points,0),Z(r),r}function oe(n){return new Promise(e=>setTimeout(e,1e3*n))}let $={sameOrigin:!1,direct:0,proxies:[{time:[0,0],url:[`https://api.codetabs.com/v1/proxy?quest=`,`https://cors.io/?url=`],respUnwrapper:[e=>e,e=>e.body?JSON.parse(e.body):null]},{time:[0,0],url:[`https://api.cors.lol/?url=`,`https://api.allorigins.win/get?url=`],respUnwrapper:[e=>e,e=>e.content?JSON.parse(e.content):null]}]};async function re(e,n){try{return Pe(e),await se(n)}finally{R()}}async function se(n){if(!($.sameOrigin||6e4<Date.now()-$.direct))return k(n);try{return await ie(n)}catch(e){if($.sameOrigin)throw e;return k(n,e)}}async function ie(e){if($.direct=Date.now(),e=await fetch(e),e.ok)return e.json();throw Error(`Nepodařilo se načíst odkaz: `+e.status)}async function ce(e){return($.sameOrigin?ie:k)(e)}async function k(t){for(let n=0;n<$.proxies.length;n++)for(let e=0;e<$.proxies[n].time.length;e++){var a=$.proxies[n],o=a.time.indexOf(Math.min(...a.time)),r=(3e3<Date.now()-a.time[o]&&await oe(3),a.time[o]=Date.now(),await fetch(``+a.url[o]+t));if(r.ok&&(r=await r.json(),a=a.respUnwrapper[o](r),a))return a}throw Error(`Nepodařilo se načíst odkaz`)}function y(e){return document.getElementById(e)}function w(e,n){document.querySelectorAll(`[data-group=${e}]`).forEach(e=>e.classList.add(n))}function de(e,n){document.querySelectorAll(`[data-group=${e}]`).forEach(e=>e.textContent=n)}function e(e){y(e).style.display=`none`}function n(e){y(e).style.display=`block`}function ue(e){y(e).style.display=`inline`}function S(e){return y(e).value}function me(e,n){e=y(e),e&&(e.value=n)}function I(e,n){e=y(e),e&&(e.textContent=n)}function pe(e,n){y(e).href=n}function N(e,n){y(e).innerHTML=n}function fe(){return S(`viewMode`)}function he(){return S(`goTo`)}function ge(){return S(`goTo-small`)}function ve(){I(`goTo`,``),I(`goTo-small`,``)}function T(e){me(`urlInput`,e)}function be(){return S(`urlInput`)}function $e(){n(`loading`)}function R(){e(`loading`)}function ke(){n(`error`)}function ye(){e(`error`)}function we(){n(`tabsContainer`)}function Se(){e(`tabsContainer`)}function Ie(){n(`eventsContainer`)}function Ne(){e(`eventsContainer`)}function Te(){n(`finaleLegend`)}function Re(){e(`finaleLegend`)}function Ce(){n(`competitionLink`),n(`eventName`),n(`competitionName`)}function Me(){e(`competitionLink`),e(`eventName`),e(`competitionName`)}function Pe(e){$e(),I(`loadingStatus`,e)}function xe(e){ke(),I(`error`,e)}function Oe(e,n,t){Ce(),I(`competitionLinkAnchor`,t),pe(`competitionLinkAnchor`,t),I(`eventName`,e),I(`competitionName`,n)}function je(){n(`loadedEvents`),n(`loadedEventsSplitter`)}function De(e){return N(`tabsHeader`,e)}function Je(e){return N(`goTo`,e)}function Ee(e){return N(`goTo-small`,e)}function Le(e){return N(`tab-content`,e)}function Fe(e){return N(`eventsContainer`,e)}function gts(){Ae(ge())}function gt(){Ae(he())}function Ae(e){(e&&=y(e))&&e.scrollIntoView({behavior:`smooth`,block:`start`}),ve()}async function Ue(e){try{await navigator.clipboard.writeText(e)}catch{}}async function ze(){try{return await navigator.clipboard.readText()}catch{}}async function plc(){T(await ze()),await C()}function le(){Me(),R(),ye(),Se(),Be(),Ie()}function Be(){let t=Object.keys(B),a=Object.keys(l),o=Object.keys(Q);Fe(`
        <ul class="event-list">
            ${P(Object.values(b).sort((e,n)=>n.dateFrom.localeCompare(e.dateFrom)).map(e=>({id:e.eventId,display:e.constructedName,competitions:Object.values(b[e.eventId].competitionsDesc).sort((e,n)=>t.indexOf(e.age)-t.indexOf(n.age)||a.indexOf(e.class)-a.indexOf(n.class)||o.indexOf(e.discipline)-o.indexOf(n.discipline)).map(e=>({id:e.competitionId,display:e.constructedName,isLoaded:e.loaded}))})),n=>`
            <li>${n.display}</li>
            <ul class="cmpt-list">
                ${P(n.competitions,e=>`
                <li class="${e.isLoaded?`loaded`:`not-loaded`}"><a href="javascript:void(0)" onclick="lcf(${n.id}, ${e.id})">${e.display}</a></li>
                `)}
            </ul>
            `)}
        </ul>
        `)}async function lc(){await C()}async function Qe(e,n){if(b[e]&&b[e].competitionsMap[n])return b[e].competitionsMap[n];if(e=await re(`Načítání výsledků soutěže...`,`https://www.csts.cz/api/1/competitions/${n}/result`),e&&e.entity)return ae(e.entity);throw Error(`Neplatná struktura dat`)}async function Ve(e){return b[e]||((e=await re(`Načítání informací o události...`,`https://www.csts.cz/api/1/competition_events/`+e))&&e.entity?te(e.entity):null)}async function C(){Ne(),Me(),R(),ye(),Se();var e=X(be());if(e)try{Oe((r=await Qe(e.eventId,e.competitionId)).constructedEventName??s(r,null),r.constructedName??G(r,null),r.constructedUrl??o(e)),Xe(),st(r.roundNames[0]),we();var n=await Ve(e.eventId);n&&(t=n,Oe(r.constructedEventName??s(r,t),r.constructedName??G(r,t),r.constructedUrl??o(e)),ee(t),ne(t.eventId,r),je()),await We()}catch(e){xe(`Chyba při načítání dat: `+e.message)}else xe(`Neplatná URL soutěže. Použijte formát: https://www.csts.cz/dancesport/vysledky_soutezi/event/XXX/competition/YYY`)}async function We(){for(var e of r.allAdjudicatorsIds)if(!i[e])try{var n=await ce(`https://www.csts.cz/api/evidence/clenove/detail-clena/osobni-udaje/`+e);n&&(i[e]=n.klub?.nazev?.trim()??`Bez klubové registrace`,Z(r),an(a))}catch{}}function Xe(){De(P(r.roundNames,e=>`<div id="tab-${e}" class="tab-header" onclick="st('${e}')">${e.toUpperCase()}</div>`))}function st(e){a=e,qe(),Ge()}function qe(){document.querySelectorAll(`.tab-header`).forEach(e=>e.classList.remove(`active`)),y(`tab-`+a).classList.add(`active`)}function rct(){Ge()}function Ge(){a&&(Ke(a),on(a),an(a))}function M(e,n){return`<option value="${e}">${n}</option>`}function Ke(e){let t=M(``,`- vyberte -`),a=M(``,`- vyberte -`);var n=fe();[`per-judge-for-cmprs`].includes(n)&&r.roundsMap[e].roundJudges.forEach(e=>{var n=g(e.index,p(e.name,e.surname),e.label);t+=M(`judge-`+e.id,n),a+=M(`judge-`+e.id,n)}),[`per-competitor-for-judges`,`per-competitor-for-dances`].includes(n)&&r.roundsMap[e].roundCompetitors.forEach(e=>{var n=g(c(e.ranking,e.rankingTo),h(p(e.name1,e.surname1),p(e.name2,e.surname2)),e.startNumber),n=(t+=M(`competitor-`+e.competitorId,n),g(c(e.ranking,e.rankingTo),h(f(e.name1,e.surname1),f(e.name2,e.surname2)),e.startNumber));a+=M(`competitor-`+e.competitorId,n)}),[`per-dance-for-cmprs`].includes(n)&&r.roundsMap[e].dances.forEach(e=>{var n=e;t+=M(`dance-`+e,n),a+=M(`dance-`+e,n)}),Je(t),Ee(a)}function P(e,n){return e.filter(e=>e!=null&&e==e).map(n).join(``)}function x(e){return e===`CZE`?``:`(${u(e)})`}function O(e){return m(e,`qualified-row`)}function j(e){return m(e,`different-final-place`)}function He(e){return`sameClub-judge-`+e}function Ye(e){return`sameClub-cmpr-`+e}function D(e,n){return`sameClub-judge-${e}-cmpr-`+n}function _e(){return`<span class="go-to-top" onclick="window.scrollTo({top: 0, behavior: 'smooth'});"></span>`}function J(e){return`<h3><span class="caption">${e}</span>${_e()}</h3>`}function Ze({isFinaleRound:n,sectionId:t,headerPerson:e,danceNames:a,dataRows:o,showPointsColumn:r}){return`
<div class="single-section" id="judge-${t}">
    ${J(`Rozhodčí ${e.orderPlace}: ${e.name} - <i><span data-group="${He(t)}">${K(e.club)}</span> ${x(e.country)}</i>`)}

    <table class="analysis-table">
        <thead>
            <tr>
                <th class="ch-final-order desktop">Celkové Umístění</th>
                <th class="ch-final-order small">F.</th>
                <th class="ch-info">Účastník</th>
                ${P(a,e=>`<th class="desktop">${e}</th><th class="small">${d[e]}</th>`)}
                <th class="ch-round-result desktop">${n?`Součet`:`Umístění / Součet`}</th>
                <th class="ch-round-result small">${n?`K Σ`:`K . / Σ`}</th>
                ${r?`<th class="ch-final-points">Body</th>`:``}
            </tr>
        </thead>
        <tbody>
        ${P(o,e=>`<tr class="${O(e.isQualified)}">
                <td class="cd-final-order ${n?`diff-0`:``}">${e.overallPlacement}.</td>
                <td class="cd-info desktop">
                    ${e.name} (${e.startNumber})<br>
                    <span class="club-name"><span data-group="${D(t,e.id)}">${u(e.clubName)}</span> ${x(e.country)}</span>
                </td>
                <td class="cd-info small">
                    <div class="c-info">
                        <span data-group="${D(t,e.id)}">${e.nameSmall} (${e.startNumber})</span>
                    </div>
                </td>
                ${P(e.dances,e=>`<td class="${u(e.class)} dance-column">${e.mark}</td>`)}
                <td class="cd-round-result ${j(e.hasDifferentFinalPlace)}">${n?``+e.roundSum:e.roundPlacement+`.<br/>/ `+e.roundSum}</td>
                ${r?`<td class="cd-final-points">${e.points}</td>`:``}
            </tr>`)}
        </tbody>
    </table>
</div>`}function en({isFinaleRound:e,sectionId:n,headerPerson:t,danceNames:a,dataRows:o}){return`
<div class="single-section" id="competitor-${n}">
    ${J(`Účastník <span class="${e?`diff-0`:``}">${t.orderPlace}.</span> ${t.name} - <i><span data-group="${Ye(n)}">${u(t.club)}</span></i>  <i>${x(t.country)}</i>`)}

    <table class="analysis-table">
        <thead>
            <tr>
                <th class="ch-final-order desktop">Pořadí</th>
                <th class="ch-final-order small">#</th>            
                <th class="ch-info">Rozhodčí</th>
                ${P(a,e=>`<th class="desktop">${e}</th><th class="small">${d[e]}</th>`)}
            </tr>
        </thead>
        <tbody>
        ${P(o,e=>`<tr class="${O(e.isQualified)}">
                <td class="cd-final-order">${e.orderPlace}.</td>
                <td class="cd-info">
                    <div class="c-info">
                        ${e.name} (${e.startNumber})<br>
                        <span class="club-name"><span data-group="${D(e.id,n)}">${K(e.clubName)}</span> ${x(e.country)}</span>
                    </div>
                </td>
                ${P(e.dances,e=>`<td class="${u(e.class)} dance-column">${e.mark}</td>`)}
            </tr>`)}
        </tbody>
    </table>
</div>`}function nn({isFinaleRound:n,sectionId:e,dance:t,judges:a,dataRows:o}){return`
<div class="single-section" id="dance-${e}">
    ${J(``+t)}

    <div class="judges-line">${P(a,(e,n)=>`<span>(<b>${e.label}</b>) - ${e.name}${n===a.length-1?``:`,  `}</span>`)}</div>

    <table class="analysis-table">
        <thead>
            <tr>
                <th class="ch-final-order desktop">Celkové Umístění</th>
                <th class="ch-final-order small">F.</th>
                <th class="ch-info">Účastník</th>
                ${P(a,e=>`<th><div class="cnt-items-judge">${e.label}<p class="hide-if-narrow">${e.name}</p></div></th>`)}
                <th class="ch-round-result desktop">${n?`Umístění v tanci`:`Součet`}</th>
                <th class="ch-round-result small">${n?`1T.`:`Σ`}</th>
            </tr>
        </thead>
        <tbody>
        ${P(o,e=>`<tr class="${O(e.isQualified)}">
                <td class="cd-final-order ${n?`diff-0`:``}">${e.overallPlacement}.</td>
                <td class="cd-info desktop">
                    ${e.name} (${e.startNumber})<br>
                    <span class="club-name">${u(e.clubName)} ${x(e.country)}</span>
                </td>
                <td class="cd-info small">
                    <div class="c-info">
                        <span>${e.nameSmall} (${e.startNumber})</span>
                    </div>
                </td>
                ${P(e.judges,e=>`<td class="${u(e.class)} dance-column">${e.mark}</td>`)}
                <td class="cd-round-result ${j(e.hasDifferentOverallPlace)}">${e.danceResult}${n?`.`:``}</td>
            </tr>`)}
        </tbody>
    </table>
</div>`}function tn({isFinaleRound:n,sectionId:e,headerPerson:t,judges:a,dataRows:o}){return`
<div class="single-section" id="competitor-${e}">
    ${J(`Účastník <span class="${n?`diff-0`:``}">${t.orderPlace}.</span>${n?``:` <span class="aux-round-result">(${t.roundResult})</span>`} ${t.name} - <i>${u(t.club)}</i>  <i>${x(t.country)}</i>`)}

    <div class="judges-line">${P(a,(e,n)=>`<span>(<b>${e.label}</b>) - ${e.name}${n===a.length-1?``:`,  `}</span>`)}</div>

    <table class="analysis-table">
        <thead>
            <tr>
                ${n?`<th class="ch-round-result desktop">Umístění v tanci</th>`:``}
                ${n?`<th class="ch-round-result small">1T.</th>`:``}
                <th class="ch-info">Tanec</th>
                ${P(a,e=>`<th><div class="cnt-items-judge">${e.label}<p class="hide-if-narrow">${e.name}</p></div></th>`)}
                ${n?``:`<th class="ch-round-result desktop">Součet</th>`}
                ${n?``:`<th class="ch-round-result small">T Σ</th>`}
            </tr>
        </thead>
        <tbody>
        ${P(o,e=>`<tr class="${O(e.isQualified)}">
                ${n?`<td class="cd-round-result ${j(e.hasDifferentOverallPlace)}">${e.danceResult}.</td>`:``}
                <td class="cd-info">
                    <div class="c-info c-info-dance">
                        ${e.danceName}
                    </div>
                </td>
                ${P(e.judges,e=>`<td class="${u(e.class)} dance-column">${e.mark}</td>`)}
                ${n?``:`<td class="cd-round-result">${e.danceResult}</td>`}
            </tr>`)}
        </tbody>
    </table>
</div>`}function an(e){e=r.roundsMap[e];let t=e.roundJudges;e=e.roundCompetitors,Object.keys(i).forEach(e=>{de(He(e),i[e])}),e.forEach(n=>{t.forEach(e=>{W(n.club,i[e.id])&&(w(D(e.id,n.competitorId),`club-highlight`),w(Ye(n.competitorId),`club-highlight`),w(He(e.id),`club-highlight`))})})}function on(e){let n=``,t=e===`Finále`,a=((t?Te:Re)(),r.roundsMap[e]);e=fe();let o={};[`per-judge-for-cmprs`].includes(e)&&a.roundJudges.forEach(e=>{o.isFinaleRound=t,o.showPointsColumn=r.competitorsHavePoints,o.sectionId=e.id,o.headerPerson={orderPlace:e.index,name:`${p(e.name,e.surname)} (${e.label})`,club:i[e.id],country:e.country},o.danceNames=a.dances,o.dataRows=rn(a,e,a.roundCompetitors,t),n+=Ze({...o})}),[`per-competitor-for-judges`].includes(e)&&a.roundCompetitors.forEach(e=>{o.isFinaleRound=t,o.sectionId=e.competitorId,o.headerPerson={orderPlace:c(e.overallRanking,e.overallRankingTo),name:`${h(p(e.name1,e.surname1),p(e.name2,e.surname2))} (#${e.startNumber})`,club:e.club,country:e.country},o.danceNames=a.dances,o.dataRows=sn(a,e,t),n+=en({...o})}),[`per-dance-for-cmprs`].includes(e)&&a.dances.forEach(e=>{o.isFinaleRound=t,o.sectionId=e,o.dance=e,o.judges=a.roundJudges.map(e=>({label:e.label,name:H(e.name,e.surname)})),o.dataRows=cn(a,e,a.roundCompetitors,t),n+=nn({...o})}),[`per-competitor-for-dances`].includes(e)&&a.roundCompetitors.forEach(e=>{o.isFinaleRound=t,o.sectionId=e.competitorId,o.headerPerson={orderPlace:c(e.overallRanking,e.overallRankingTo),roundResult:`K. ${c(e.ranking,e.rankingTo)}. / Σ `+e.sum,name:`${h(p(e.name1,e.surname1),p(e.name2,e.surname2))} (#${e.startNumber})`,club:e.club,country:e.country},o.judges=a.roundJudges.map(e=>({label:e.label,name:H(e.name,e.surname)})),o.dataRows=ln(a,e,a.dances,t),n+=tn({...o})}),Le(n)}function rn(r,s,e,n){return e.map(o=>({id:o.competitorId,overallPlacement:c(o.overallRanking,o.overallRankingTo),roundPlacement:c(o.ranking,o.rankingTo),hasDifferentFinalPlace:o.overallRankingTo<o.ranking||o.overallRanking>o.rankingTo,roundSum:o.sum,points:``+String(o.points).padStart(3,` `)+(o.final?`/F`:`  `),name:h(p(o.name1,o.surname1),p(o.name2,o.surname2)),nameSmall:h(f(o.name1,o.surname1),f(o.name2,o.surname2)),startNumber:`#`+o.startNumber,clubName:o.club,country:o.country,isQualified:o.wasRoundPassed,dances:n?r.dances.map((e,n)=>{var n=o.splitMarks[n*r.roundJudges.length+s.index-1],t=parseInt(n.replace(/\([^)]*\)/g,``)),a=Math.min(Math.abs(t-o.overallRanking),6),t=Math.min(Math.abs(t-o.overallRankingTo),6);return{mark:n,class:`diff-`+Math.min(a,t)}}):r.dances.map((e,n)=>{var n=o.splitMarks[n*r.roundJudges.length+s.index-1];return{mark:n,class:n.replace(/\([^)]*\)/g,``).toUpperCase()===`X`?`x-mark`:void 0}})}))}function sn(r,s,e){return r.roundJudges.map(o=>({id:o.id,orderPlace:o.index,name:p(o.name,o.surname),startNumber:o.label,clubName:i[o.id],country:o.country,isQualified:s.wasRoundPassed,dances:e?r.dances.map((e,n)=>{var n=s.splitMarks[n*r.roundJudges.length+o.index-1],t=parseInt(n.replace(/\([^)]*\)/g,``)),a=Math.min(Math.abs(t-s.overallRanking),6),t=Math.min(Math.abs(t-s.overallRankingTo),6);return{mark:n,class:`diff-`+Math.min(a,t)}}):r.dances.map((e,n)=>{var n=s.splitMarks[n*r.roundJudges.length+o.index-1];return{mark:n,class:n.replace(/\([^)]*\)/g,``).toUpperCase()===`X`?`x-mark`:void 0}})}))}function cn(o,r,e,n){return e.map(a=>{var e=a.dancesResultsMap[r];return{overallPlacement:c(a.overallRanking,a.overallRankingTo),hasDifferentOverallPlace:n&&(a.overallRankingTo<e||a.overallRanking>e),name:h(p(a.name1,a.surname1),p(a.name2,a.surname2)),nameSmall:h(f(a.name1,a.surname1),f(a.name2,a.surname2)),startNumber:`#`+a.startNumber,clubName:a.club,country:a.country,isQualified:a.wasRoundPassed,danceResult:e,judges:n?o.roundJudges.map(e=>{var n=o.dances.indexOf(r),n=a.splitMarks[n*o.roundJudges.length+e.index-1],e=parseInt(n.replace(/\([^)]*\)/g,``)),t=Math.min(Math.abs(e-a.overallRanking),6),e=Math.min(Math.abs(e-a.overallRankingTo),6);return{mark:n,class:`diff-`+Math.min(t,e)}}):o.roundJudges.map(e=>{var n=o.dances.indexOf(r),n=a.splitMarks[n*o.roundJudges.length+e.index-1],e=n.replace(/\([^)]*\)/g,``).toUpperCase();return{mark:n,class:e===`X`?`x-mark`:void 0}})}})}function lcf(e,n){dn(e,n)}function dn(e,n){Ne(),T(o({eventId:e,competitionId:n})),C()}function ln(o,r,e,n){return e.map(a=>{var e=r.dancesResultsMap[a];return{hasDifferentOverallPlace:n&&(r.overallRankingTo<e||r.overallRanking>e),danceName:a,isQualified:r.wasRoundPassed,danceResult:e,judges:n?o.roundJudges.map(e=>{var n=o.dances.indexOf(a),n=r.splitMarks[n*o.roundJudges.length+e.index-1],e=parseInt(n.replace(/\([^)]*\)/g,``)),t=Math.min(Math.abs(e-r.overallRanking),6),e=Math.min(Math.abs(e-r.overallRankingTo),6);return{mark:n,class:`diff-`+Math.min(t,e)}}):o.roundJudges.map(e=>{var n=o.dances.indexOf(a),n=r.splitMarks[n*o.roundJudges.length+e.index-1],e=n.replace(/\([^)]*\)/g,``).toUpperCase();return{mark:n,class:e===`X`?`x-mark`:void 0}})}})}window.addEventListener(`load`,()=>{var e=y(`urlInput`),e=(e&&e.addEventListener(`keydown`,e=>{e.key===`Enter`&&(e.preventDefault(),C())}),$.sameOrigin=window.location.origin===`https://www.csts.cz`,new URLSearchParams(window.location.search)),n=e.get(`url`),t=e.get(`eventId`),e=e.get(`competitionId`);n&&X(n)?(T(n),C()):t&&e&&(T(o({eventId:t,competitionId:e})),C())});</script>